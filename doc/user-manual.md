# 闇堕ちキャラクタージェネレーター 取扱説明書

本書はアプリを起動した後の画面構成と操作方法について説明します。起動方法については`README.md`を参照してください。

## 1. メイン画面
アプリを起動すると「闇堕ちキャラクターメーカー」メイン画面が表示されます。上部のヘッダーにはアプリ名と「設定」ボタンがあり、各種調整は中央のスクロール領域で行います。

### 1-1. キャラクター基本設定セクション
メインフォームの前半は「キャラクター基本設定」見出しの下にまとまっています。モード選択から主人公度スライダーまでがこのセクションに含まれ、闇堕ち前のキャラクター像を整える入力を担当します。

### 1-2. モード切り替え
- **オート**: 初期状態で選択されています。キャラクター属性の詳細入力を省略し、AIにほぼおまかせで生成します。
- **セミオート**: キャラクター属性欄が有効になり、チェックボックスや自由記述で生成結果に反映させたい要素を細かく指定できます。

### 1-3. 世界観ジャンル
- プルダウンメニューから舞台となる世界観を選択します。例: 「中世ダークファンタジー」「SFディストピア」など。
- 起動時に自動で最初のジャンルが選択されています。別のジャンルを選ぶと生成の背景設定が変わります。

### 1-4. キャラクター属性（セミオート専用）
- セミオートモード時のみ入力可能です。
- **チェックボックス群**: キャラクター性格や立ち位置に関するキーワードを複数選択できます。各項目にカーソルを合わせると詳細説明のツールチップが表示されます。
- **補足メモ欄**: キャラクター属性について補足したい情報を自由に入力できます。

### 1-5. 主人公度スライダー
- 1〜5の整数段階で「主人公度」を指定します。数値は右側のラベルに表示されます。
- つまみをドラッグまたはクリックすると値が変更され、AIへの指示に反映されます。

### 1-6. 闇堕ち設定セクション
フォーム後半の「闇堕ち設定」見出しの下には、闇堕ち後の状態を決める入力がまとまっています。闇堕ちカテゴリ属性、闇堕ち度、闇堕ちメモをここで設定してください。

### 1-7. 闇堕ちカテゴリ属性
- 闇堕ちに関する複数カテゴリ（外見変化、動機、精神状態、変貌過程など）がアコーディオン形式で並びます。
- 各カテゴリを展開し、該当する項目のチェックボックスを選択してください。ツールチップで詳細説明を確認できます。

### 1-8. 闇堕ち度スライダー
- 10〜300% の範囲を 10% 刻みで指定します。値は右側にパーセント表示されます。
- つまみを動かすと自動的に最寄りの 10% 単位に丸められます。闇堕ち度が高いほど重い堕ち方になります。

### 1-9. 闇堕ちメモ
- テキストエリアに、キャラクターの背景や演出に関する自由メモを入力できます。
- 入力内容は生成リクエストにそのまま添付されます。

### 1-10. 生成ボタン
- 入力が完了したら「闇堕ちキャラクターを生成」ボタンを押します。
- 生成処理中はボタンが無効化され、画面全体のマウスカーソルが待機状態になります。
- 必要な入力が不足している場合は警告ダイアログが表示されます。内容を確認して再度実行してください。

## 2. 生成結果ダイアログ
生成が完了すると「生成されたキャラクター」ダイアログが開きます。

- **闇堕ちストーリー欄**: 生成されたキャラクターの説明文が表示されます。テキストはコピー可能です。
- **プロンプトを表示**: 生成に用いたプロンプト全文を別ダイアログで確認できます。プロンプトが取得できなかった場合はボタンが無効になります。
- **閉じる**: ダイアログを閉じてメイン画面に戻ります。必要に応じて再度生成を実行できます。

## 3. 設定ダイアログ
メイン画面右上の「設定」ボタンを押すと、AIプロバイダ設定ダイアログが開きます。

### 3-1. AIプロバイダ選択
- 登録済みのプロバイダ（例: OpenAIなど）から利用したいサービスを選択します。
- プロバイダを切り替えると、画面内の入力欄が対応する設定内容に更新されます。

### 3-2. APIキー入力
- 選択したプロバイダのAPIキーを入力します。入力後は「保存」で保持され、ストアに暗号化された状態で保存されます。
- キーを空欄にして保存すると、該当プロバイダの設定がクリアされます。

### 3-3. モデル一覧取得（対応プロバイダのみ）
- プロバイダがモデル一覧の取得に対応している場合、「モデル一覧を取得」ボタンが有効になります。
- APIキーを入力してボタンを押すと利用可能なモデルが取得され、隣のプルダウンに一覧表示されます。
- モデルを選択したうえで保存すると、そのモデルが生成処理に使用されます。

### 3-4. ステータス表示
- 画面下部のメッセージで現在の設定状況（APIキー設定済みか、モデル選択が必要かなど）が確認できます。

### 3-5. 操作ボタン
- **保存**: 入力内容を保存し、ダイアログを閉じます。必要な情報が不足している場合は保存できません。
- **キャンセル**: 入力内容を破棄してダイアログを閉じます。
- **クリア**: 選択中のプロバイダ設定を削除し、APIキーやモデル選択を空にします。

## 4. メッセージとエラーへの対応
- 入力内容に問題がある場合や生成処理中にエラーが発生した場合は、アラートダイアログが表示されます。
- 表示されたメッセージに従って入力内容を修正、または設定を見直してください。
- API呼び出し時に警告が返却された場合は結果ダイアログ表示前に警告ダイアログが表示されます。内容を確認したうえで結果を参照してください。

## 5. より良い生成のためのヒント
- セミオートモードで複数の属性やメモを組み合わせると、物語性の高いキャラクターが生成されます。
- 闇堕ち度を上げすぎると極端な描写になりやすいため、目的に応じて適切な値を選択してください。
- 生成結果が期待と異なる場合は、世界観や闇堕ちカテゴリの組み合わせを変えたり、自由記述欄を調整して再生成してみてください。

以上で、アプリ起動後の操作方法の説明は終わりです。
