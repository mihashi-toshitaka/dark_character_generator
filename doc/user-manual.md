# 闇堕ちキャラクタージェネレーター 取扱説明書

本書はアプリを起動した後の画面構成と操作方法について説明します。起動方法については`README.md`を参照してください。

## 1. メイン画面
アプリを起動すると「闇堕ちキャラクターメーカー」メイン画面が表示されます。上部のヘッダーにはアプリ名と「設定」ボタンがあり、各種調整は中央のスクロール領域で行います。

### 1-1. キャラクター基本設定セクション
メインフォームの前半は「キャラクター基本設定」見出しの下にまとまっています。モード選択から立ち位置セグメントまでがこのセクションに含まれ、闇堕ち前のキャラクター像を整える入力を担当します。

### 1-2. モード切り替え
- **オート**: 初期状態で選択されています。キャラクター属性の詳細入力なしで生成します。
- **セミオート**: キャラクター属性欄が有効になり、チェックボックスや自由記述で生成結果に反映させたい要素を細かく指定できます。

### 1-3. 世界観ジャンル
- プルダウンメニューから舞台となる世界観を選択します。例: 「中世ダークファンタジー」「SFディストピア」など。
- 起動時に自動で最初のジャンルが選択されています。別のジャンルを選ぶと生成の背景設定が変わります。

### 1-4. 闇堕ち前キャラクター属性（セミオート専用）
- セミオートモード時のみ入力可能です。
- **チェックボックス群**: キャラクター性格や立ち位置に関するキーワードを複数選択できます。各項目にカーソルを合わせると詳細説明のツールチップが表示されます。
- **補足メモ欄**: キャラクター属性について補足したい情報を自由に入力できます。

### 1-5. 闇堕ち前の立ち位置（主人公⇄敵陣営バイアス）

- **数値スライダー**で1〜5段階のバイアスを選択します。中央の「3」が初期値で、中立／第三勢力スタートを意味します。
- スライダーの目盛りは整数値にスナップし、左端が「主人公」、右端が「敵陣営」です。段階ごとの意味は以下のとおりです。

  1. **主人公** — 物語の中心・正義側から開始
  2. **仲間寄り** — 主人公陣営のサブ／相棒ポジ
  3. **中立・第三勢力** — どちらにも属さない立場
  4. **敵寄り** — 敵側に傾いた反英雄ポジ
  5. **敵陣営** — 最初から敵側の中核メンバー
- つまみを動かすと下部のプレビュー文が即座に更新され、AIへの指示にそのまま反映されます。

### 1-6. 闇堕ち設定セクション
フォーム後半の「闇堕ち設定」見出しの下には、闇堕ち後の状態を決める入力がまとまっています。闇堕ちカテゴリ属性、闇堕ち度、闇堕ちメモをここで設定してください。

### 1-7. 闇堕ちカテゴリ属性
- 闇堕ちに関する複数カテゴリ（外見変化、動機、精神状態、変貌過程など）がアコーディオン形式で並びます。
- 各カテゴリを展開し、該当する項目のチェックボックスを選択してください。ツールチップで詳細説明を確認できます。

### 1-8. 闇堕ち度
- つまみを動かすと 50%、100%、150%、200%、250% の 5 段階プリセットから選べます。100% で完全敵化の状態です。
- 選択肢ごとの短いラベルと意味は以下のとおりです。
  1. **50%（軽度）** — 闇の力に傾倒し、それをかなり受け入れているが、かつての情や未練がわずかに残る。状況と相手次第では説得に耳を傾けることもあるが、闇への決意は容易には揺らがない。
  2. **100%（通常）** — 闇に完全支配され、価値観も忠誠も暗黒側に固定。自分の行動理念を達成するためには手段を選ばない。正義側から見れば完全敵対化であり、理詰めの説得も情の訴えも通用しない。
  3. **150%（重め）** — 単なる闇堕ちを越え、深く闇そのものへと同化した段階。闇堕ち前の自我の多くは剥落し、力の行使それ自体が行動目的へとなり替わってきている。
  4. **200%（過激）** — 世界を闇に塗りつぶすために動く存在となった段階。禁忌や人道は抑止力を失い、反対勢力は体系的に排除され、都市・国家規模で世界が闇に堕ち始める
  5. **250%（極端）** — 絶対的な闇の権化。存在そのものが破局の引き金となり、正義は壊滅、世界は取り返しのつかない崩壊へ傾く——物語は完全なバッドエンドに収束する。
- プリセットを変えると、選択中の闇堕ち度に応じてプレビュー文が即時に更新されます。

### 1-9. 闇堕ちメモ
- テキストエリアに、キャラクターの背景や演出に関する自由メモを入力できます。
- 入力内容は生成リクエストにそのまま添付されます。

### 1-10. 生成ボタン
- 入力が完了したら「闇堕ちキャラクターを生成」ボタンを押します。
- 生成処理中はボタンが無効化され、画面全体のマウスカーソルが待機状態になります。
- 必要な入力が不足している場合は警告ダイアログが表示されます。内容を確認して再度実行してください。

## 2. 生成結果ダイアログ
生成が完了すると「生成されたキャラクター」ダイアログが開きます。

- **闇堕ちストーリー欄**: 生成されたキャラクターの説明文が表示されます。テキストはコピー可能です。
- **プロンプトを表示**: 生成に用いたプロンプト全文を別ダイアログで確認できます。プロンプトが取得できなかった場合はボタンが無効になります。
- **閉じる**: ダイアログを閉じてメイン画面に戻ります。必要に応じて再度生成を実行できます。

## 3. 設定ダイアログ
メイン画面右上の「設定」ボタンを押すと、AIプロバイダ設定ダイアログが開きます。

### 3-1. AIプロバイダ選択
- 登録済みのプロバイダ（例: OpenAIなど）から利用したいサービスを選択します。
- プロバイダを切り替えると、画面内の入力欄が対応する設定内容に更新されます。

### 3-2. APIキー入力
- 選択したプロバイダのAPIキーを入力します。入力後は「保存」で保持され、ストアに暗号化された状態で保存されます。
- キーを空欄にして保存すると、該当プロバイダの設定がクリアされます。

### 3-3. モデル一覧取得（対応プロバイダのみ）
- プロバイダがモデル一覧の取得に対応している場合、「モデル一覧を取得」ボタンが有効になります。
- APIキーを入力してボタンを押すと利用可能なモデルが取得され、隣のプルダウンに一覧表示されます。
- モデルを選択したうえで保存すると、そのモデルが生成処理に使用されます。

### 3-4. ステータス表示
- 画面下部のメッセージで現在の設定状況（APIキー設定済みか、モデル選択が必要かなど）が確認できます。

### 3-5. 操作ボタン
- **保存**: 入力内容を保存し、ダイアログを閉じます。必要な情報が不足している場合は保存できません。
- **キャンセル**: 入力内容を破棄してダイアログを閉じます。
- **クリア**: 選択中のプロバイダ設定を削除し、APIキーやモデル選択を空にします。

## 4. メッセージとエラーへの対応
- 入力内容に問題がある場合や生成処理中にエラーが発生した場合は、アラートダイアログが表示されます。
- 表示されたメッセージに従って入力内容を修正、または設定を見直してください。
- API呼び出し時に警告が返却された場合は結果ダイアログ表示前に警告ダイアログが表示されます。内容を確認したうえで結果を参照してください。

## 5. より良い生成のためのヒント
- セミオートモードで複数の属性やメモを組み合わせると、物語性の高いキャラクターが生成されます。
- 闇堕ち度を上げすぎると極端な描写になりやすいため、目的に応じて適切な値を選択してください。
- 生成結果が期待と異なる場合は、世界観や闇堕ちカテゴリの組み合わせを変えたり、自由記述欄を調整して再生成してみてください。

以上で、アプリ起動後の操作方法の説明は終わりです。
