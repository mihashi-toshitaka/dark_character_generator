<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.darkchar.ui.controller.MainViewController">
    <top>
        <BorderPane style="-fx-padding: 16;">
            <center>
                <Label text="闇堕ちキャラクターメーカー" BorderPane.alignment="CENTER"
                       style="-fx-font-size: 20px;" />
            </center>
            <right>
                <Button fx:id="settingsButton" text="設定" onAction="#handleOpenSettings"
                        BorderPane.alignment="CENTER" />
            </right>
        </BorderPane>
    </top>
    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER">
            <content>
                <VBox spacing="14" style="-fx-padding: 18;">
                    <Label text="キャラクター基本設定" styleClass="section-header" />
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="モード" />
                        <RadioButton fx:id="autoModeButton" text="オート" />
                        <RadioButton fx:id="semiAutoModeButton" text="セミオート" />
                    </HBox>
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="世界観ジャンル" />
                        <ComboBox fx:id="worldGenreComboBox" prefWidth="280" />
                    </HBox>
                    <TitledPane text="キャラクター属性（セミオート専用）" collapsible="false">
                        <content>
                            <VBox spacing="8">
                                <FlowPane fx:id="characterTraitContainer" hgap="10" vgap="8" prefWrapLength="480" />
                                <TextArea fx:id="traitFreeTextArea" prefRowCount="2" wrapText="true"
                                          promptText="キャラクター属性の補足" />
                            </VBox>
                        </content>
                    </TitledPane>
                    <VBox spacing="6">
                        <fx:define>
                            <ToggleGroup fx:id="protagonistToggleGroup" />
                        </fx:define>
                        <Label text="立ち位置（主人公⇄敵陣営バイアス）" />
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="主人公" />
                            <HBox spacing="6" alignment="CENTER_LEFT">
                                <children>
                                    <ToggleButton fx:id="protagonistHeroToggle" text="主人公\n物語の中心" toggleGroup="$protagonistToggleGroup" wrapText="true" prefWidth="110" />
                                    <ToggleButton fx:id="protagonistAllyToggle" text="仲間寄り\n相棒ポジ" toggleGroup="$protagonistToggleGroup" wrapText="true" prefWidth="110" />
                                    <ToggleButton fx:id="protagonistNeutralToggle" text="中立・第三勢力\nどちらにも属さない" toggleGroup="$protagonistToggleGroup" wrapText="true" prefWidth="110" />
                                    <ToggleButton fx:id="protagonistAntiheroToggle" text="敵寄り\n反英雄" toggleGroup="$protagonistToggleGroup" wrapText="true" prefWidth="110" />
                                    <ToggleButton fx:id="protagonistEnemyToggle" text="敵陣営\n中核メンバー" toggleGroup="$protagonistToggleGroup" wrapText="true" prefWidth="110" />
                                </children>
                            </HBox>
                            <Label text="敵陣営" />
                        </HBox>
                        <Label fx:id="protagonistPreviewLabel" text="例: 選択すると例文を表示します。" wrapText="true" />
                        <Label wrapText="true" text="※数字が大きいほど、開始時点で敵陣営に近い立場になります。『闇堕ち度』と組み合わせると、1（主人公）×高闇堕ち＝王道堕ち／5（敵陣営）×高闇堕ち＝悪の深化のように解釈されます。" styleClass="help-text" />
                    </VBox>
                    <Label text="闇堕ち設定" styleClass="section-header" />
                    <TitledPane text="闇堕ちカテゴリ属性" collapsible="false">
                        <content>
                            <VBox fx:id="darknessCategoryContainer" spacing="10" />
                        </content>
                    </TitledPane>
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="闇堕ち度" />
                        <Slider fx:id="darknessSlider" prefWidth="260" />
                        <Label fx:id="darknessValueLabel" text="3" />
                    </HBox>
                    <VBox spacing="6">
                        <Label text="闇堕ちメモ" />
                        <TextArea fx:id="freeTextArea" prefRowCount="3" wrapText="true" />
                    </VBox>
                    <Button fx:id="generateButton" text="闇堕ちキャラクターを生成" onAction="#handleGenerate" />
                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>
