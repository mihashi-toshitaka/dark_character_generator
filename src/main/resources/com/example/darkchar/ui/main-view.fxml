<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.darkchar.ui.controller.MainViewController">
    <top>
        <BorderPane style="-fx-padding: 16;">
            <center>
                <Label text="闇堕ちキャラクターメーカー" BorderPane.alignment="CENTER"
                       style="-fx-font-size: 20px;" />
            </center>
            <right>
                <Button fx:id="settingsButton" text="設定" onAction="#handleOpenSettings"
                        BorderPane.alignment="CENTER" />
            </right>
        </BorderPane>
    </top>
    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER">
            <content>
                <VBox spacing="14" style="-fx-padding: 18;">
                    <Label text="キャラクター基本設定" styleClass="section-header" />
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="モード" />
                        <RadioButton fx:id="autoModeButton" text="オート" />
                        <RadioButton fx:id="semiAutoModeButton" text="セミオート" />
                    </HBox>
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="世界観ジャンル" />
                        <ComboBox fx:id="worldGenreComboBox" prefWidth="280" />
                    </HBox>
                    <TitledPane text="闇堕ち前キャラクター属性（セミオート専用）" collapsible="false">
                        <content>
                            <VBox spacing="8">
                                <FlowPane fx:id="characterTraitContainer" hgap="10" vgap="8" prefWrapLength="480" />
                                <TextArea fx:id="traitFreeTextArea" prefRowCount="2" wrapText="true"
                                          promptText="キャラクター属性の補足" />
                            </VBox>
                        </content>
                    </TitledPane>
                    <VBox spacing="6">
                        <Label text="闇堕ち前の立ち位置（主人公⇄敵陣営バイアス）" />
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <Label text="主人公" />
                            <Slider fx:id="protagonistBiasSlider"
                                    min="1"
                                    max="5"
                                    value="3"
                                    blockIncrement="1"
                                    majorTickUnit="1"
                                    minorTickCount="0"
                                    showTickLabels="true"
                                    showTickMarks="true"
                                    snapToTicks="true"
                                    prefWidth="320" />
                            <Label text="敵陣営" />
                        </HBox>
                        <Label fx:id="protagonistPreviewLabel" text="例: 選択すると例文を表示します。" wrapText="true" />
                        <Label wrapText="true" text="※数字が大きいほど、元々敵陣営に近い立場のキャラクターになります。" styleClass="help-text" />
                    </VBox>
                    <Label text="闇堕ち設定" styleClass="section-header" />
                    <TitledPane text="闇堕ちカテゴリ属性" collapsible="false">
                        <content>
                            <VBox fx:id="darknessCategoryContainer" spacing="10" />
                        </content>
                    </TitledPane>
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <Label text="闇堕ち度" />
                        <Slider fx:id="darknessSlider"
                                min="50"
                                max="250"
                                value="100"
                                blockIncrement="50"
                                majorTickUnit="50"
                                minorTickCount="0"
                                showTickLabels="true"
                                showTickMarks="true"
                                snapToTicks="true"
                                prefWidth="260" />
                        <Label fx:id="darknessValueLabel" text="100%（通常）" />
                    </HBox>
                    <Label fx:id="darknessDescriptionLabel" wrapText="true"
                           text="闇への傾倒が進み、迷いながらも暗い選択を受け入れ始めています。" />
                    <Label wrapText="true" text="※闇堕ち度は50%〜250%の5段階プリセット。100%で完全敵化。"
                           styleClass="help-text" />
                    <VBox spacing="6">
                        <Label text="闇堕ちメモ" />
                        <TextArea fx:id="freeTextArea" prefRowCount="3" wrapText="true" />
                    </VBox>
                    <Button fx:id="generateButton" text="闇堕ちキャラクターを生成" onAction="#handleGenerate" />
                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>
